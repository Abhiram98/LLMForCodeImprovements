{
    "Method_Improvements": {
        "Improvements": [
            {
                "Improvement": "Extract string literals to constants",
                "Change_Diff": "+ private static final String MAX_IDLE_TIME_POSITIVE = \"maxIdleTime must be positive\";\n+ private static final String MAX_IDLE_TIME_TOO_BIG = \"maxIdleTime is too big, should less than maxTimeSlots * 1000\";\n+ private static final String SPECIFY_EPL_AND_EVENT = \"must specify EPL and event definition to enable sessionization\";\n+ private static final String MAIN_SESSION_PROFILE_NULL = \"mainSessionProfile is null\";\n+ private static final String SESSION_PROFILE_NAME_NULL = \"session profile name is null\";\n+ private static final String SPECIFY_EVENT_DEFINITION = \"must specify event definition to for sessinizer \";\n+ private static final String MAX_ACTIVE_TIME_LESS_DEFAULTTTL = \"maxActiveTime must be greater than defaultTtl\";\n+ private static final String DUPLICATE_SESSION_TYPE_ID = \"duplicate session type id \";\n+ private static final String DUPLICATE_SESSION_NAME = \"duplicate session name \";\n+ private static final String SUB_SESSION_PROFILE_NAME_NULL = \"sub session profile name is null\";\n+ private static final String MUST_SPECIFY_EPL_FOR_SUB = \"Must specify EPL for sub sessinizer \";\n+ private static final String SUB_SESSIONIZER_DEFAULT_TTL = \"sub sessionizer  default ttl must be positive and less than main sessionizer default ttl\";\n+ private static final String DUPLICATE_SUB_SESSION = \"duplicate sub session \";",
                "Description": "It is a good practice to extract string literals that are used multiple times in the code to constants. This makes the code more maintainable and less error-prone.",
                "Start": 4,
                "End": 60
            },
            {
                "Improvement": "Separate checking conditions into different methods",
                "Change_Diff": "+ private List<String> checkMainConfig() { ... }\n+ private List<String> checkMainSessionProfiles() { ... }\n+ private List<String> checkSubSessionProfiles() { ... }\n- public List<String> validate() { ... }",
                "Description": "The validate method is quite large and does many different checks. It would be easier to read and maintain if these checks were separated into their own methods.",
                "Start": 3,
                "End": 60
            }
        ],
        "Final code": "private static final String MAX_IDLE_TIME_POSITIVE = \"maxIdleTime must be positive\";\nprivate static final String MAX_IDLE_TIME_TOO_BIG = \"maxIdleTime is too big, should less than maxTimeSlots * 1000\";\nprivate static final String SPECIFY_EPL_AND_EVENT = \"must specify EPL and event definition to enable sessionization\";\nprivate static final String MAIN_SESSION_PROFILE_NULL = \"mainSessionProfile is null\";\nprivate static final String SESSION_PROFILE_NAME_NULL = \"session profile name is null\";\nprivate static final String SPECIFY_EVENT_DEFINITION = \"must specify event definition to for sessinizer \";\nprivate static final String MAX_ACTIVE_TIME_LESS_DEFAULTTTL = \"maxActiveTime must be greater than defaultTtl\";\nprivate static final String DUPLICATE_SESSION_TYPE_ID = \"duplicate session type id \";\nprivate static final String DUPLICATE_SESSION_NAME = \"duplicate session name \";\nprivate static final String SUB_SESSION_PROFILE_NAME_NULL = \"sub session profile name is null\";\nprivate static final String MUST_SPECIFY_EPL_FOR_SUB = \"Must specify EPL for sub sessinizer \";\nprivate static final String SUB_SESSIONIZER_DEFAULT_TTL = \"sub sessionizer  default ttl must be positive and less than main sessionizer default ttl\";\nprivate static final String DUPLICATE_SUB_SESSION = \"duplicate sub session \";\n\nprivate List<String> checkMainConfig() { ... }\nprivate List<String> checkMainSessionProfiles() { ... }\nprivate List<String> checkSubSessionProfiles() { ... }\n\npublic List<String> validate() { ... }"
    },
    "Old_Method": "public List<String> validate(){\n  List<String> errors=new ArrayList<String>();\n  if (config.getMaxIdleTime() <= 0) {\n    errors.add(\"maxIdleTime must be positive\");\n  }\n  if (config.getMaxIdleTime() > oldConfig.getMaxTimeSlots() * 1000) {\n    errors.add(\"maxIdleTime is too big, should less than maxTimeSlots * 1000\");\n  }\n  if (config.getEpl() == null || config.getRawEventDefinition() == null) {\n    errors.add(\"must specify EPL and event definition to enable sessionization\");\n  }\n  if (config.getMainSessionProfiles() == null) {\n    errors.add(\"mainSessionProfile is null\");\n    return errors;\n  }\n else {\n    List<Integer> sessionTypes=new ArrayList<Integer>();\n    List<String> sessionNames=new ArrayList<String>();\n    for (    SessionProfile mp : config.getMainSessionProfiles()) {\n      if (mp.getName() == null) {\n        errors.add(\"session profile name is null\");\n        continue;\n      }\n      if (mp.getEpl() != null && mp.getRawEventDefinition() == null) {\n        errors.add(\"must specify event definition to for sessinizer \" + mp.getName());\n        continue;\n      }\n      if (mp.getMaxActiveTime() < mp.getDefaultTtl()) {\n        errors.add(\"maxActiveTime must be greater than defaultTtl\");\n      }\n      if (sessionTypes.contains(mp.getSessionType())) {\n        errors.add(\"duplicate session type id \" + mp.getSessionType());\n      }\n else {\n        sessionTypes.add(mp.getSessionType());\n      }\n      if (sessionNames.contains(mp.getName())) {\n        errors.add(\"duplicate session name \" + mp.getName());\n      }\n else {\n        sessionNames.add(mp.getName());\n      }\n      List<SubSessionProfile> subSessionProfiles=mp.getSubSessionProfiles();\n      if (subSessionProfiles != null) {\n        List<String> subProfilerIds=new ArrayList<String>();\n        for (        SubSessionProfile p : subSessionProfiles) {\n          if (p.getName() == null) {\n            errors.add(\"sub session profile name is null\");\n            continue;\n          }\n          if (p.getEpl() != null && mp.getRawEventDefinition() == null) {\n            errors.add(\"Must specify EPL for sub sessinizer \" + p.getName());\n            continue;\n          }\n          if (p.getDefaultTtl() <= 0 || p.getDefaultTtl() > mp.getDefaultTtl()) {\n            errors.add(\"sub sessionizer \" + p.getName() + \" default ttl must be positive and less than main sessionizer default ttl\");\n          }\n          if (subProfilerIds.contains(p.getName())) {\n            errors.add(\"duplicate sub session \" + p.getName());\n          }\n else {\n            subProfilerIds.add(p.getName());\n          }\n        }\n      }\n    }\n  }\n  return errors;\n}\n",
    "File_Path": "realtime-analytics/sessionizer/src/main/java/com/ebay/pulsar/sessionizer/config/SessionizerConfigValidator.java",
    "Start": 601,
    "Stop": 3897,
    "Project_Name": "data/projects/realtime-analytics",
    "Method_Name": "validate"
}